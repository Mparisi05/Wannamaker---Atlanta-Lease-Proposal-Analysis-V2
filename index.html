<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lease Comparison - 3740 Davinci Ct | IREP</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f7fa;
            color: #2c3e50;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            color: #1a365d;
            margin-bottom: 10px;
            font-size: 2rem;
        }
        
        .subtitle {
            color: #64748b;
            margin-bottom: 30px;
            font-size: 1rem;
        }
        
        .deals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .deal-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .deal-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .deal-header {
            border-bottom: 2px solid #3b82f6;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        
        .deal-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: #1e40af;
            margin-bottom: 5px;
        }
        
        .deal-term {
            color: #64748b;
            font-size: 0.95rem;
        }
        
        .deal-info {
            margin-bottom: 20px;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .info-label {
            color: #64748b;
            font-weight: 500;
        }
        
        .info-value {
            color: #1e293b;
            font-weight: 600;
        }
        
        .controls-section {
            background: #f8fafc;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .controls-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .controls-title::before {
            content: "âš™ï¸";
            margin-right: 8px;
        }
        
        .toggle-option {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .toggle-option:hover {
            border-color: #3b82f6;
            background: #f0f9ff;
        }
        
        .toggle-option.active {
            border-color: #3b82f6;
            background: #dbeafe;
        }
        
        .toggle-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .toggle-checkbox {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            cursor: pointer;
        }
        
        .toggle-label {
            font-weight: 600;
            color: #1e293b;
            flex: 1;
        }
        
        .toggle-description {
            color: #64748b;
            font-size: 0.9rem;
            margin-left: 30px;
            line-height: 1.5;
        }
        
        .benefit-highlight {
            background: #fef3c7;
            border-left: 3px solid #f59e0b;
            padding: 12px;
            margin-top: 15px;
            border-radius: 4px;
        }
        
        .benefit-title {
            font-weight: 600;
            color: #92400e;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .benefit-text {
            color: #78350f;
            font-size: 0.85rem;
        }
        
        .current-terms {
            background: #e0f2fe;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 15px;
        }
        
        .current-terms-title {
            font-weight: 600;
            color: #0369a1;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }
        
        .term-detail {
            color: #075985;
            font-size: 0.9rem;
            margin: 3px 0;
        }
        
        .comparison-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e40af;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3b82f6;
        }
        
        .chart-container {
            margin: 30px 0;
            padding: 20px;
            background: #f8fafc;
            border-radius: 8px;
        }
        
        .chart-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 15px;
            text-align: center;
        }
        
        canvas {
            max-height: 400px;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .summary-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .summary-deal-name {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 10px;
            opacity: 0.9;
        }
        
        .summary-amount {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .summary-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .modified-badge {
            display: inline-block;
            background: #10b981;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
        }
        
        @media (max-width: 768px) {
            .deals-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .deal-name {
                font-size: 1.2rem;
            }
            
            .container > div:first-child {
                flex-direction: column !important;
                align-items: flex-start !important;
            }
            
            .container > div:first-child > div:last-child {
                text-align: left !important;
                margin-top: 10px;
            }
        }
        
        .note-box {
            background: #fffbeb;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .note-box strong {
            color: #92400e;
        }
        
        .note-box p {
            color: #78350f;
            margin: 5px 0;
            font-size: 0.95rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
            <div>
                <h1>Commercial Lease Comparison Tool</h1>
                <p class="subtitle">Interactive analysis with free rent adjustment options</p>
                <div style="margin-top: 10px; color: #64748b; font-size: 0.95rem;">
                    <div>ğŸ“ 3740 Davinci Ct</div>
                    <div style="margin-left: 20px;">Peachtree Corners, GA</div>
                </div>
            </div>
            <div style="text-align: right;">
                <div style="font-size: 1.3rem; font-weight: 700; color: #1e40af;">Industry Real Estate Partners</div>
                <div style="font-size: 1rem; color: #475569; margin-top: 8px; font-weight: 500;">Matt Parisi</div>
            </div>
        </div>
        
        <div class="note-box">
            <strong>ğŸ’¡ Landlord Flexibility Options</strong>
            <p>Many landlords are willing to restructure free rent to help tenants manage cash flow during transitions. Converting 100% free rent to 50% free rent doubles the abatement period, which can be especially valuable while you're still paying on your Midtown lease that you've vacated.</p>
        </div>
        
        <div class="note-box" style="background: #fef3c7; border-left: 4px solid #f59e0b;">
            <strong style="color: #92400e;">ğŸ“Š Understanding the 3-Year Extrapolated Scenario</strong>
            <p style="color: #78350f;">This scenario projects your 5-year financial outlook if you sign the 3-Year Proposal and then renew for an additional 2+ years. The key insight: <strong>after your initial 3-year term, you'll likely have less negotiating leverage</strong> than you do today. This extrapolation estimates market-rate renewal terms without the competitive leverage of multiple options.</p>
            <p style="color: #78350f; margin-top: 8px;">By comparing this to the 5-Year Proposal, you can see the <strong>true cost difference</strong> of committing to a longer term now (with better rates and more free rent) versus taking a shorter term and facing renewal without the same leverage you currently hold.</p>
        </div>
        
        <div id="syncNote" class="note-box" style="display: none; background: #dbeafe; border-left: 4px solid #3b82f6;">
            <strong>âš–ï¸ Apples-to-Apples Comparison</strong>
            <p>When you add an extra month to the 5-Year Proposal, the 3-Year Extrapolated term is automatically extended by one month to ensure a fair comparison of equivalent lease periods.</p>
        </div>
        
        <div class="deals-grid" id="dealsGrid"></div>
        
        <div class="comparison-section">
            <h2 class="section-title">Annual Expenditure Comparison</h2>
            <div class="chart-container">
                <div class="chart-title">Calendar Year Breakdown - All Scenarios</div>
                <canvas id="annualChart"></canvas>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Month-by-Month Net Obligation Comparison</div>
                <canvas id="monthlyChart"></canvas>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Total Obligation Over Term</div>
                <canvas id="totalChart"></canvas>
            </div>
            
            <div class="summary-grid" id="summaryGrid"></div>
        </div>
        
        <div class="comparison-section" style="background: linear-gradient(135deg, #e0f2fe 0%, #f0fdf4 100%); border: 2px solid #10b981;">
            <h2 class="section-title" style="color: #047857; border-bottom-color: #10b981;">ğŸ’ 5-Year Proposal: Additional Value Opportunity</h2>
            <div class="note-box" style="background: white; border-left-color: #10b981;">
                <strong style="color: #047857; font-size: 1.1rem;">$15/SF Additional Tenant Improvement Allowance</strong>
                <p style="color: #065f46; margin-top: 10px;">The 5-Year Proposal includes an additional <strong>$15/SF in TI allowance</strong> (total: $90,930) that you can use to significantly enhance your space. This is a valuable differentiator compared to the 3-Year proposals.</p>
            </div>
            
            <div style="margin-top: 25px;">
                <h3 style="color: #047857; font-size: 1.2rem; margin-bottom: 15px;">Potential Improvements with Additional TI:</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px;">
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                        <div style="font-weight: 600; color: #047857; margin-bottom: 8px;">ğŸ¢ Flooring & Wall Finishes</div>
                        <div style="color: #065f46; font-size: 0.9rem;">Premium carpet tiles, luxury vinyl plank, or upgraded wall coverings throughout your space</div>
                    </div>
                    
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                        <div style="font-weight: 600; color: #047857; margin-bottom: 8px;">ğŸ’¡ Electrical & Lighting Enhancements</div>
                        <div style="color: #065f46; font-size: 0.9rem;">Additional electrical outlets, panel upgrades, LED lighting, recessed can lighting with dimmers, or suspended ceiling improvements</div>
                    </div>
                    
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                        <div style="font-weight: 600; color: #047857; margin-bottom: 8px;">ğŸµ Acoustical Work</div>
                        <div style="color: #065f46; font-size: 0.9rem;">Ceiling tile upgrades, drywall finished ceilings, soundproofing, or acoustic panels</div>
                    </div>
                    
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                        <div style="font-weight: 600; color: #047857; margin-bottom: 8px;">ğŸª‘ Millwork & Cabinetry</div>
                        <div style="color: #065f46; font-size: 0.9rem;">Custom countertops, built-in cabinetry, reception desk, or shelving systems</div>
                    </div>
                    
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                        <div style="font-weight: 600; color: #047857; margin-bottom: 8px;">ğŸšª Interior Doors</div>
                        <div style="color: #065f46; font-size: 0.9rem;">Upgraded interior office doors, glass partitions, or modern door hardware</div>
                    </div>
                    
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                        <div style="font-weight: 600; color: #047857; margin-bottom: 8px;">ğŸ› ï¸ Structural & HVAC</div>
                        <div style="color: #065f46; font-size: 0.9rem;">Drywall demising walls, additional HVAC diffusers and intakes, or supplemental air conditioning</div>
                    </div>
                </div>
            </div>
            
            <div class="benefit-highlight" style="margin-top: 20px; background: #fefce8; border-left-color: #eab308;">
                <div class="benefit-title" style="color: #854d0e;">ğŸ’° Financial Impact</div>
                <div class="benefit-text" style="color: #713f12;">This additional $90,930 in TI allowance represents real dollars you can invest in your space rather than out-of-pocket expenses. Combined with the longer term security and lower base rate, the 5-Year Proposal offers substantial value beyond just the monthly rent figures.</div>
            </div>
        </div>
        
        <div style="text-align: center; padding: 30px 20px; margin-top: 40px; border-top: 2px solid #e2e8f0; color: #64748b;">
            <div style="font-weight: 600; color: #1e40af; font-size: 1.1rem; margin-bottom: 5px;">Industry Real Estate Partners</div>
            <div style="font-size: 0.95rem; color: #475569; margin-bottom: 8px;">Matt Parisi | Professional Tenant Representation</div>
            <div style="font-size: 0.85rem; margin-top: 10px;">Analysis for 3740 Davinci Ct, Peachtree Corners, GA</div>
        </div>
    </div>
    
    <script>
        // Deal data embedded
        const dealData = {"deals":[{"info":{"name":"3-Year Proposal","size":6062.0,"term_months":39,"base_rate":31.5,"annual_escalation":0.03,"base_year":2026,"base_year_opex":8.25,"opex_escalation":0.025,"free_rent_months":3,"abatement_pct":"100%"},"monthly":[{"month":"Pre-5","date":"01/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"Pre-4","date":"02/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"Pre-3","date":"03/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"Pre-2","date":"04/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"Pre-1","date":"05/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"1","date":"06/01/2026","base_rate":31.5,"opex_rate":0.0,"base_rent":15912.75,"opex":0.0,"gross_rent":15912.75,"abatement":15912.75,"ti_credit":0,"net_rent":0.0},{"month":"2","date":"07/01/2026","base_rate":31.5,"opex_rate":0.0,"base_rent":15912.75,"opex":0.0,"gross_rent":15912.75,"abatement":15912.75,"ti_credit":0,"net_rent":0.0},{"month":"3","date":"08/01/2026","base_rate":31.5,"opex_rate":0.0,"base_rent":15912.75,"opex":0.0,"gross_rent":15912.75,"abatement":15912.75,"ti_credit":0,"net_rent":0.0},{"month":"4","date":"09/01/2026","base_rate":31.5,"opex_rate":0.0,"base_rent":15912.75,"opex":0.0,"gross_rent":15912.75,"abatement":0.0,"ti_credit":15912.75,"net_rent":0.0},{"month":"5","date":"10/01/2026","base_rate":31.5,"opex_rate":0.0,"base_rent":15912.75,"opex":0.0,"gross_rent":15912.75,"abatement":0.0,"ti_credit":15912.75,"net_rent":0.0},{"month":"6","date":"11/01/2026","base_rate":31.5,"opex_rate":0.0,"base_rent":15912.75,"opex":0.0,"gross_rent":15912.75,"abatement":0.0,"ti_credit":15912.75,"net_rent":0.0},{"month":"7","date":"12/01/2026","base_rate":31.5,"opex_rate":0.0,"base_rent":15912.75,"opex":0.0,"gross_rent":15912.75,"abatement":0.0,"ti_credit":12881.75,"net_rent":3031.0},{"month":"8","date":"01/01/2027","base_rate":31.5,"opex_rate":0.21000000000000085,"base_rent":15912.75,"opex":106.09,"gross_rent":16018.84,"abatement":0.0,"ti_credit":0,"net_rent":16018.84},{"month":"9","date":"02/01/2027","base_rate":31.5,"opex_rate":0.21000000000000085,"base_rent":15912.75,"opex":106.09,"gross_rent":16018.84,"abatement":0.0,"ti_credit":0,"net_rent":16018.84},{"month":"10","date":"03/01/2027","base_rate":31.5,"opex_rate":0.21000000000000085,"base_rent":15912.75,"opex":106.09,"gross_rent":16018.84,"abatement":0.0,"ti_credit":0,"net_rent":16018.84},{"month":"11","date":"04/01/2027","base_rate":31.5,"opex_rate":0.21000000000000085,"base_rent":15912.75,"opex":106.09,"gross_rent":16018.84,"abatement":0.0,"ti_credit":0,"net_rent":16018.84},{"month":"12","date":"05/01/2027","base_rate":31.5,"opex_rate":0.21000000000000085,"base_rent":15912.75,"opex":106.09,"gross_rent":16018.84,"abatement":0.0,"ti_credit":0,"net_rent":16018.84},{"month":"13","date":"06/01/2027","base_rate":32.45,"opex_rate":0.21000000000000085,"base_rent":16392.66,"opex":106.09,"gross_rent":16498.75,"abatement":0.0,"ti_credit":0,"net_rent":16498.75},{"month":"14","date":"07/01/2027","base_rate":32.45,"opex_rate":0.21000000000000085,"base_rent":16392.66,"opex":106.09,"gross_rent":16498.75,"abatement":0.0,"ti_credit":0,"net_rent":16498.75},{"month":"15","date":"08/01/2027","base_rate":32.45,"opex_rate":0.21000000000000085,"base_rent":16392.66,"opex":106.09,"gross_rent":16498.75,"abatement":0.0,"ti_credit":0,"net_rent":16498.75},{"month":"16","date":"09/01/2027","base_rate":32.45,"opex_rate":0.21000000000000085,"base_rent":16392.66,"opex":106.09,"gross_rent":16498.75,"abatement":0.0,"ti_credit":0,"net_rent":16498.75},{"month":"17","date":"10/01/2027","base_rate":32.45,"opex_rate":0.21000000000000085,"base_rent":16392.66,"opex":106.09,"gross_rent":16498.75,"abatement":0.0,"ti_credit":0,"net_rent":16498.75},{"month":"18","date":"11/01/2027","base_rate":32.45,"opex_rate":0.21000000000000085,"base_rent":16392.66,"opex":106.09,"gross_rent":16498.75,"abatement":0.0,"ti_credit":0,"net_rent":16498.75},{"month":"19","date":"12/01/2027","base_rate":32.45,"opex_rate":0.21000000000000085,"base_rent":16392.66,"opex":106.09,"gross_rent":16498.75,"abatement":0.0,"ti_credit":0,"net_rent":16498.75},{"month":"20","date":"01/01/2028","base_rate":32.45,"opex_rate":0.41999999999999993,"base_rent":16392.66,"opex":212.17,"gross_rent":16604.83,"abatement":0.0,"ti_credit":0,"net_rent":16604.83},{"month":"21","date":"02/01/2028","base_rate":32.45,"opex_rate":0.41999999999999993,"base_rent":16392.66,"opex":212.17,"gross_rent":16604.83,"abatement":0.0,"ti_credit":0,"net_rent":16604.83},{"month":"22","date":"03/01/2028","base_rate":32.45,"opex_rate":0.41999999999999993,"base_rent":16392.66,"opex":212.17,"gross_rent":16604.83,"abatement":0.0,"ti_credit":0,"net_rent":16604.83},{"month":"23","date":"04/01/2028","base_rate":32.45,"opex_rate":0.41999999999999993,"base_rent":16392.66,"opex":212.17,"gross_rent":16604.83,"abatement":0.0,"ti_credit":0,"net_rent":16604.83},{"month":"24","date":"05/01/2028","base_rate":32.45,"opex_rate":0.41999999999999993,"base_rent":16392.66,"opex":212.17,"gross_rent":16604.83,"abatement":0.0,"ti_credit":0,"net_rent":16604.83},{"month":"25","date":"06/01/2028","base_rate":33.42,"opex_rate":0.41999999999999993,"base_rent":16882.67,"opex":212.17,"gross_rent":17094.84,"abatement":0.0,"ti_credit":0,"net_rent":17094.84},{"month":"26","date":"07/01/2028","base_rate":33.42,"opex_rate":0.41999999999999993,"base_rent":16882.67,"opex":212.17,"gross_rent":17094.84,"abatement":0.0,"ti_credit":0,"net_rent":17094.84},{"month":"27","date":"08/01/2028","base_rate":33.42,"opex_rate":0.41999999999999993,"base_rent":16882.67,"opex":212.17,"gross_rent":17094.84,"abatement":0.0,"ti_credit":0,"net_rent":17094.84},{"month":"28","date":"09/01/2028","base_rate":33.42,"opex_rate":0.41999999999999993,"base_rent":16882.67,"opex":212.17,"gross_rent":17094.84,"abatement":0.0,"ti_credit":0,"net_rent":17094.84},{"month":"29","date":"10/01/2028","base_rate":33.42,"opex_rate":0.41999999999999993,"base_rent":16882.67,"opex":212.17,"gross_rent":17094.84,"abatement":0.0,"ti_credit":0,"net_rent":17094.84},{"month":"30","date":"11/01/2028","base_rate":33.42,"opex_rate":0.41999999999999993,"base_rent":16882.67,"opex":212.17,"gross_rent":17094.84,"abatement":0.0,"ti_credit":0,"net_rent":17094.84},{"month":"31","date":"12/01/2028","base_rate":33.42,"opex_rate":0.41999999999999993,"base_rent":16882.67,"opex":212.17,"gross_rent":17094.84,"abatement":0.0,"ti_credit":0,"net_rent":17094.84},{"month":"32","date":"01/01/2029","base_rate":33.42,"opex_rate":0.6400000000000006,"base_rent":16882.67,"opex":323.31,"gross_rent":17205.98,"abatement":0.0,"ti_credit":0,"net_rent":17205.98},{"month":"33","date":"02/01/2029","base_rate":33.42,"opex_rate":0.6400000000000006,"base_rent":16882.67,"opex":323.31,"gross_rent":17205.98,"abatement":0.0,"ti_credit":0,"net_rent":17205.98},{"month":"34","date":"03/01/2029","base_rate":33.42,"opex_rate":0.6400000000000006,"base_rent":16882.67,"opex":323.31,"gross_rent":17205.98,"abatement":0.0,"ti_credit":0,"net_rent":17205.98},{"month":"35","date":"04/01/2029","base_rate":33.42,"opex_rate":0.6400000000000006,"base_rent":16882.67,"opex":323.31,"gross_rent":17205.98,"abatement":0.0,"ti_credit":0,"net_rent":17205.98},{"month":"36","date":"05/01/2029","base_rate":33.42,"opex_rate":0.6400000000000006,"base_rent":16882.67,"opex":323.31,"gross_rent":17205.98,"abatement":0.0,"ti_credit":0,"net_rent":17205.98},{"month":"37","date":"06/01/2029","base_rate":34.42,"opex_rate":0.6400000000000006,"base_rent":17387.84,"opex":323.31,"gross_rent":17711.15,"abatement":0.0,"ti_credit":0,"net_rent":17711.15},{"month":"38","date":"07/01/2029","base_rate":34.42,"opex_rate":0.6400000000000006,"base_rent":17387.84,"opex":323.31,"gross_rent":17711.15,"abatement":0.0,"ti_credit":0,"net_rent":17711.15},{"month":"39","date":"08/01/2029","base_rate":34.42,"opex_rate":0.6400000000000006,"base_rent":17387.84,"opex":323.31,"gross_rent":17711.15,"abatement":0.0,"ti_credit":0,"net_rent":17711.15}],"calendar":[{"year":2026,"pre_commencement":46727.9,"new_lease":3031.0,"total":49758.9},{"year":2027,"pre_commencement":0.0,"new_lease":195585.45,"total":195585.45},{"year":2028,"pre_commencement":0.0,"new_lease":202688.03,"total":202688.03},{"year":2029,"pre_commencement":0.0,"new_lease":139163.35,"total":139163.35}]},{"info":{"name":"3-Year Proposal Extrapolated","size":6062.0,"term_months":39,"base_rate":31.5,"annual_escalation":3.0,"base_year":2026,"base_year_opex":8.25,"opex_escalation":2.5,"free_rent_months":3,"abatement_pct":"100%"},"monthly":[{"month":"Pre-5","date":"01/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"Pre-4","date":"02/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"Pre-3","date":"03/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"Pre-2","date":"04/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"Pre-1","date":"05/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"1","date":"06/01/2026","base_rate":31.5,"opex_rate":0.0,"base_rent":15912.75,"opex":0.0,"gross_rent":15912.75,"abatement":15912.75,"ti_credit":0,"net_rent":0.0},{"month":"2","date":"07/01/2026","base_rate":31.5,"opex_rate":0.0,"base_rent":15912.75,"opex":0.0,"gross_rent":15912.75,"abatement":15912.75,"ti_credit":0,"net_rent":0.0},{"month":"3","date":"08/01/2026","base_rate":31.5,"opex_rate":0.0,"base_rent":15912.75,"opex":0.0,"gross_rent":15912.75,"abatement":15912.75,"ti_credit":0,"net_rent":0.0},{"month":"4","date":"09/01/2026","base_rate":31.5,"opex_rate":0.0,"base_rent":15912.75,"opex":0.0,"gross_rent":15912.75,"abatement":0.0,"ti_credit":15912.75,"net_rent":0.0},{"month":"5","date":"10/01/2026","base_rate":31.5,"opex_rate":0.0,"base_rent":15912.75,"opex":0.0,"gross_rent":15912.75,"abatement":0.0,"ti_credit":15912.75,"net_rent":0.0},{"month":"6","date":"11/01/2026","base_rate":31.5,"opex_rate":0.0,"base_rent":15912.75,"opex":0.0,"gross_rent":15912.75,"abatement":0.0,"ti_credit":15912.75,"net_rent":0.0},{"month":"7","date":"12/01/2026","base_rate":31.5,"opex_rate":0.0,"base_rent":15912.75,"opex":0.0,"gross_rent":15912.75,"abatement":0.0,"ti_credit":12881.75,"net_rent":3031.0},{"month":"8","date":"01/01/2027","base_rate":31.5,"opex_rate":0.21000000000000085,"base_rent":15912.75,"opex":106.09,"gross_rent":16018.84,"abatement":0.0,"ti_credit":0,"net_rent":16018.84},{"month":"9","date":"02/01/2027","base_rate":31.5,"opex_rate":0.21000000000000085,"base_rent":15912.75,"opex":106.09,"gross_rent":16018.84,"abatement":0.0,"ti_credit":0,"net_rent":16018.84},{"month":"10","date":"03/01/2027","base_rate":31.5,"opex_rate":0.21000000000000085,"base_rent":15912.75,"opex":106.09,"gross_rent":16018.84,"abatement":0.0,"ti_credit":0,"net_rent":16018.84},{"month":"11","date":"04/01/2027","base_rate":31.5,"opex_rate":0.21000000000000085,"base_rent":15912.75,"opex":106.09,"gross_rent":16018.84,"abatement":0.0,"ti_credit":0,"net_rent":16018.84},{"month":"12","date":"05/01/2027","base_rate":31.5,"opex_rate":0.21000000000000085,"base_rent":15912.75,"opex":106.09,"gross_rent":16018.84,"abatement":0.0,"ti_credit":0,"net_rent":16018.84},{"month":"13","date":"06/01/2027","base_rate":32.45,"opex_rate":0.21000000000000085,"base_rent":16392.66,"opex":106.09,"gross_rent":16498.75,"abatement":0.0,"ti_credit":0,"net_rent":16498.75},{"month":"14","date":"07/01/2027","base_rate":32.45,"opex_rate":0.21000000000000085,"base_rent":16392.66,"opex":106.09,"gross_rent":16498.75,"abatement":0.0,"ti_credit":0,"net_rent":16498.75},{"month":"15","date":"08/01/2027","base_rate":32.45,"opex_rate":0.21000000000000085,"base_rent":16392.66,"opex":106.09,"gross_rent":16498.75,"abatement":0.0,"ti_credit":0,"net_rent":16498.75},{"month":"16","date":"09/01/2027","base_rate":32.45,"opex_rate":0.21000000000000085,"base_rent":16392.66,"opex":106.09,"gross_rent":16498.75,"abatement":0.0,"ti_credit":0,"net_rent":16498.75},{"month":"17","date":"10/01/2027","base_rate":32.45,"opex_rate":0.21000000000000085,"base_rent":16392.66,"opex":106.09,"gross_rent":16498.75,"abatement":0.0,"ti_credit":0,"net_rent":16498.75},{"month":"18","date":"11/01/2027","base_rate":32.45,"opex_rate":0.21000000000000085,"base_rent":16392.66,"opex":106.09,"gross_rent":16498.75,"abatement":0.0,"ti_credit":0,"net_rent":16498.75},{"month":"19","date":"12/01/2027","base_rate":32.45,"opex_rate":0.21000000000000085,"base_rent":16392.66,"opex":106.09,"gross_rent":16498.75,"abatement":0.0,"ti_credit":0,"net_rent":16498.75},{"month":"20","date":"01/01/2028","base_rate":32.45,"opex_rate":0.41999999999999993,"base_rent":16392.66,"opex":212.17,"gross_rent":16604.83,"abatement":0.0,"ti_credit":0,"net_rent":16604.83},{"month":"21","date":"02/01/2028","base_rate":32.45,"opex_rate":0.41999999999999993,"base_rent":16392.66,"opex":212.17,"gross_rent":16604.83,"abatement":0.0,"ti_credit":0,"net_rent":16604.83},{"month":"22","date":"03/01/2028","base_rate":32.45,"opex_rate":0.41999999999999993,"base_rent":16392.66,"opex":212.17,"gross_rent":16604.83,"abatement":0.0,"ti_credit":0,"net_rent":16604.83},{"month":"23","date":"04/01/2028","base_rate":32.45,"opex_rate":0.41999999999999993,"base_rent":16392.66,"opex":212.17,"gross_rent":16604.83,"abatement":0.0,"ti_credit":0,"net_rent":16604.83},{"month":"24","date":"05/01/2028","base_rate":32.45,"opex_rate":0.41999999999999993,"base_rent":16392.66,"opex":212.17,"gross_rent":16604.83,"abatement":0.0,"ti_credit":0,"net_rent":16604.83},{"month":"25","date":"06/01/2028","base_rate":33.42,"opex_rate":0.41999999999999993,"base_rent":16882.67,"opex":212.17,"gross_rent":17094.84,"abatement":0.0,"ti_credit":0,"net_rent":17094.84},{"month":"26","date":"07/01/2028","base_rate":33.42,"opex_rate":0.41999999999999993,"base_rent":16882.67,"opex":212.17,"gross_rent":17094.84,"abatement":0.0,"ti_credit":0,"net_rent":17094.84},{"month":"27","date":"08/01/2028","base_rate":33.42,"opex_rate":0.41999999999999993,"base_rent":16882.67,"opex":212.17,"gross_rent":17094.84,"abatement":0.0,"ti_credit":0,"net_rent":17094.84},{"month":"28","date":"09/01/2028","base_rate":33.42,"opex_rate":0.41999999999999993,"base_rent":16882.67,"opex":212.17,"gross_rent":17094.84,"abatement":0.0,"ti_credit":0,"net_rent":17094.84},{"month":"29","date":"10/01/2028","base_rate":33.42,"opex_rate":0.41999999999999993,"base_rent":16882.67,"opex":212.17,"gross_rent":17094.84,"abatement":0.0,"ti_credit":0,"net_rent":17094.84},{"month":"30","date":"11/01/2028","base_rate":33.42,"opex_rate":0.41999999999999993,"base_rent":16882.67,"opex":212.17,"gross_rent":17094.84,"abatement":0.0,"ti_credit":0,"net_rent":17094.84},{"month":"31","date":"12/01/2028","base_rate":33.42,"opex_rate":0.41999999999999993,"base_rent":16882.67,"opex":212.17,"gross_rent":17094.84,"abatement":0.0,"ti_credit":0,"net_rent":17094.84},{"month":"32","date":"01/01/2029","base_rate":33.42,"opex_rate":0.6400000000000006,"base_rent":16882.67,"opex":323.31,"gross_rent":17205.98,"abatement":0.0,"ti_credit":0,"net_rent":17205.98},{"month":"33","date":"02/01/2029","base_rate":33.42,"opex_rate":0.6400000000000006,"base_rent":16882.67,"opex":323.31,"gross_rent":17205.98,"abatement":0.0,"ti_credit":0,"net_rent":17205.98},{"month":"34","date":"03/01/2029","base_rate":33.42,"opex_rate":0.6400000000000006,"base_rent":16882.67,"opex":323.31,"gross_rent":17205.98,"abatement":0.0,"ti_credit":0,"net_rent":17205.98},{"month":"35","date":"04/01/2029","base_rate":33.42,"opex_rate":0.6400000000000006,"base_rent":16882.67,"opex":323.31,"gross_rent":17205.98,"abatement":0.0,"ti_credit":0,"net_rent":17205.98},{"month":"36","date":"05/01/2029","base_rate":33.42,"opex_rate":0.6400000000000006,"base_rent":16882.67,"opex":323.31,"gross_rent":17205.98,"abatement":0.0,"ti_credit":0,"net_rent":17205.98},{"month":"37","date":"06/01/2029","base_rate":34.42,"opex_rate":0.6400000000000006,"base_rent":17387.84,"opex":323.31,"gross_rent":17711.15,"abatement":0.0,"ti_credit":0,"net_rent":17711.15},{"month":"38","date":"07/01/2029","base_rate":34.42,"opex_rate":0.6400000000000006,"base_rent":17387.84,"opex":323.31,"gross_rent":17711.15,"abatement":0.0,"ti_credit":0,"net_rent":17711.15},{"month":"39","date":"08/01/2029","base_rate":34.42,"opex_rate":0.6400000000000006,"base_rent":17387.84,"opex":323.31,"gross_rent":17711.15,"abatement":0.0,"ti_credit":0,"net_rent":17711.15},{"month":"40","date":"09/01/2029","base_rate":35.45,"opex_rate":0.6400000000000006,"base_rent":17908.16,"opex":0.0,"gross_rent":17908.16,"abatement":0.0,"ti_credit":0,"net_rent":17908.16},{"month":"41","date":"10/01/2029","base_rate":35.45,"opex_rate":0.6400000000000006,"base_rent":17908.16,"opex":0.0,"gross_rent":17908.16,"abatement":0.0,"ti_credit":0,"net_rent":17908.16},{"month":"42","date":"11/01/2029","base_rate":35.45,"opex_rate":0.6400000000000006,"base_rent":17908.16,"opex":0.0,"gross_rent":17908.16,"abatement":0.0,"ti_credit":0,"net_rent":17908.16},{"month":"43","date":"12/01/2029","base_rate":35.45,"opex_rate":0.6400000000000006,"base_rent":17908.16,"opex":0.0,"gross_rent":17908.16,"abatement":0.0,"ti_credit":0,"net_rent":17908.16},{"month":"44","date":"01/01/2030","base_rate":35.45,"opex_rate":0.8599999999999994,"base_rent":17908.16,"opex":111.14,"gross_rent":18019.3,"abatement":0.0,"ti_credit":0,"net_rent":18019.3},{"month":"45","date":"02/01/2030","base_rate":35.45,"opex_rate":0.8599999999999994,"base_rent":17908.16,"opex":111.14,"gross_rent":18019.3,"abatement":0.0,"ti_credit":0,"net_rent":18019.3},{"month":"46","date":"03/01/2030","base_rate":35.45,"opex_rate":0.8599999999999994,"base_rent":17908.16,"opex":111.14,"gross_rent":18019.3,"abatement":0.0,"ti_credit":0,"net_rent":18019.3},{"month":"47","date":"04/01/2030","base_rate":35.45,"opex_rate":0.8599999999999994,"base_rent":17908.16,"opex":111.14,"gross_rent":18019.3,"abatement":0.0,"ti_credit":0,"net_rent":18019.3},{"month":"48","date":"05/01/2030","base_rate":35.45,"opex_rate":0.8599999999999994,"base_rent":17908.16,"opex":111.14,"gross_rent":18019.3,"abatement":0.0,"ti_credit":0,"net_rent":18019.3},{"month":"49","date":"06/01/2030","base_rate":36.51,"opex_rate":0.8599999999999994,"base_rent":18443.63,"opex":111.14,"gross_rent":18554.77,"abatement":0.0,"ti_credit":0,"net_rent":18554.77},{"month":"50","date":"07/01/2030","base_rate":36.51,"opex_rate":0.8599999999999994,"base_rent":18443.63,"opex":111.14,"gross_rent":18554.77,"abatement":0.0,"ti_credit":0,"net_rent":18554.77},{"month":"51","date":"08/01/2030","base_rate":36.51,"opex_rate":0.8599999999999994,"base_rent":18443.63,"opex":111.14,"gross_rent":18554.77,"abatement":0.0,"ti_credit":0,"net_rent":18554.77},{"month":"52","date":"09/01/2030","base_rate":36.51,"opex_rate":0.8599999999999994,"base_rent":18443.63,"opex":111.14,"gross_rent":18554.77,"abatement":0.0,"ti_credit":0,"net_rent":18554.77},{"month":"53","date":"10/01/2030","base_rate":36.51,"opex_rate":0.8599999999999994,"base_rent":18443.63,"opex":111.14,"gross_rent":18554.77,"abatement":0.0,"ti_credit":0,"net_rent":18554.77},{"month":"54","date":"11/01/2030","base_rate":36.51,"opex_rate":0.8599999999999994,"base_rent":18443.63,"opex":111.14,"gross_rent":18554.77,"abatement":0.0,"ti_credit":0,"net_rent":18554.77},{"month":"55","date":"12/01/2030","base_rate":36.51,"opex_rate":0.8599999999999994,"base_rent":18443.63,"opex":111.14,"gross_rent":18554.77,"abatement":0.0,"ti_credit":0,"net_rent":18554.77},{"month":"56","date":"01/01/2031","base_rate":36.51,"opex_rate":1.0899999999999999,"base_rent":18443.63,"opex":227.32,"gross_rent":18670.95,"abatement":0.0,"ti_credit":0,"net_rent":18670.95},{"month":"57","date":"02/01/2031","base_rate":36.51,"opex_rate":1.0899999999999999,"base_rent":18443.63,"opex":227.32,"gross_rent":18670.95,"abatement":0.0,"ti_credit":0,"net_rent":18670.95},{"month":"58","date":"03/01/2031","base_rate":36.51,"opex_rate":1.0899999999999999,"base_rent":18443.63,"opex":227.32,"gross_rent":18670.95,"abatement":0.0,"ti_credit":0,"net_rent":18670.95},{"month":"59","date":"04/01/2031","base_rate":36.51,"opex_rate":1.0899999999999999,"base_rent":18443.63,"opex":227.32,"gross_rent":18670.95,"abatement":0.0,"ti_credit":0,"net_rent":18670.95},{"month":"60","date":"05/01/2031","base_rate":36.51,"opex_rate":1.0899999999999999,"base_rent":18443.63,"opex":227.32,"gross_rent":18670.95,"abatement":0.0,"ti_credit":0,"net_rent":18670.95},{"month":"61","date":"06/01/2031","base_rate":37.61,"opex_rate":1.0899999999999999,"base_rent":18999.32,"opex":227.32,"gross_rent":19226.64,"abatement":0.0,"ti_credit":0,"net_rent":19226.64},{"month":"62","date":"07/01/2031","base_rate":37.61,"opex_rate":1.0899999999999999,"base_rent":18999.32,"opex":227.32,"gross_rent":19226.64,"abatement":0.0,"ti_credit":0,"net_rent":19226.64},{"month":"63","date":"08/01/2031","base_rate":37.61,"opex_rate":1.0899999999999999,"base_rent":18999.32,"opex":227.32,"gross_rent":19226.64,"abatement":0.0,"ti_credit":0,"net_rent":19226.64},{"month":"64","date":"09/01/2031","base_rate":37.61,"opex_rate":1.0899999999999999,"base_rent":18999.32,"opex":227.32,"gross_rent":19226.64,"abatement":0.0,"ti_credit":0,"net_rent":19226.64},{"month":"65","date":"10/01/2031","base_rate":37.61,"opex_rate":1.0899999999999999,"base_rent":18999.32,"opex":227.32,"gross_rent":19226.64,"abatement":0.0,"ti_credit":0,"net_rent":19226.64}],"calendar":[{"year":2026,"pre_commencement":46727.9,"new_lease":3031.0,"total":49758.9},{"year":2027,"pre_commencement":0.0,"new_lease":195585.45,"total":195585.45},{"year":2028,"pre_commencement":0.0,"new_lease":202688.03,"total":202688.03},{"year":2029,"pre_commencement":0.0,"new_lease":210795.99,"total":210795.99},{"year":2030,"pre_commencement":0.0,"new_lease":219979.89,"total":219979.89},{"year":2031,"pre_commencement":0.0,"new_lease":189487.95,"total":189487.95}]},{"info":{"name":"5-Year Proposal","size":6062.0,"term_months":65,"base_rate":31.0,"annual_escalation":3.0,"base_year":2026,"base_year_opex":8.25,"opex_escalation":2.5,"free_rent_months":5,"abatement_pct":"100%"},"monthly":[{"month":"Pre-5","date":"01/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"Pre-4","date":"02/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"Pre-3","date":"03/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"Pre-2","date":"04/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"Pre-1","date":"05/01/2026","base_rate":0,"opex_rate":0,"base_rent":0,"opex":0,"gross_rent":0,"abatement":0,"ti_credit":0,"net_rent":0.0},{"month":"1","date":"06/01/2026","base_rate":31.0,"opex_rate":0.0,"base_rent":15660.17,"opex":0.0,"gross_rent":15660.17,"abatement":15660.17,"ti_credit":0,"net_rent":0.0},{"month":"2","date":"07/01/2026","base_rate":31.0,"opex_rate":0.0,"base_rent":15660.17,"opex":0.0,"gross_rent":15660.17,"abatement":15660.17,"ti_credit":0,"net_rent":0.0},{"month":"3","date":"08/01/2026","base_rate":31.0,"opex_rate":0.0,"base_rent":15660.17,"opex":0.0,"gross_rent":15660.17,"abatement":15660.17,"ti_credit":0,"net_rent":0.0},{"month":"4","date":"09/01/2026","base_rate":31.0,"opex_rate":0.0,"base_rent":15660.17,"opex":0.0,"gross_rent":15660.17,"abatement":15660.17,"ti_credit":0,"net_rent":0.0},{"month":"5","date":"10/01/2026","base_rate":31.0,"opex_rate":0.0,"base_rent":15660.17,"opex":0.0,"gross_rent":15660.17,"abatement":15660.17,"ti_credit":0,"net_rent":0.0},{"month":"6","date":"11/01/2026","base_rate":31.0,"opex_rate":0.0,"base_rent":15660.17,"opex":0.0,"gross_rent":15660.17,"abatement":0.0,"ti_credit":15660.17,"net_rent":0.0},{"month":"7","date":"12/01/2026","base_rate":31.0,"opex_rate":0.0,"base_rent":15660.17,"opex":0.0,"gross_rent":15660.17,"abatement":0.0,"ti_credit":15660.17,"net_rent":0.0},{"month":"8","date":"01/01/2027","base_rate":31.0,"opex_rate":0.21000000000000085,"base_rent":15660.17,"opex":106.09,"gross_rent":15766.26,"abatement":0.0,"ti_credit":15766.26,"net_rent":0.0},{"month":"9","date":"02/01/2027","base_rate":31.0,"opex_rate":0.21000000000000085,"base_rent":15660.17,"opex":106.09,"gross_rent":15766.26,"abatement":0.0,"ti_credit":13533.4,"net_rent":2232.8600000000006},{"month":"10","date":"03/01/2027","base_rate":31.0,"opex_rate":0.21000000000000085,"base_rent":15660.17,"opex":106.09,"gross_rent":15766.26,"abatement":0.0,"ti_credit":0,"net_rent":15766.26},{"month":"11","date":"04/01/2027","base_rate":31.0,"opex_rate":0.21000000000000085,"base_rent":15660.17,"opex":106.09,"gross_rent":15766.26,"abatement":0.0,"ti_credit":0,"net_rent":15766.26},{"month":"12","date":"05/01/2027","base_rate":31.0,"opex_rate":0.21000000000000085,"base_rent":15660.17,"opex":106.09,"gross_rent":15766.26,"abatement":0.0,"ti_credit":0,"net_rent":15766.26},{"month":"13","date":"06/01/2027","base_rate":31.93,"opex_rate":0.21000000000000085,"base_rent":16129.97,"opex":106.09,"gross_rent":16236.06,"abatement":0.0,"ti_credit":0,"net_rent":16236.06},{"month":"14","date":"07/01/2027","base_rate":31.93,"opex_rate":0.21000000000000085,"base_rent":16129.97,"opex":106.09,"gross_rent":16236.06,"abatement":0.0,"ti_credit":0,"net_rent":16236.06},{"month":"15","date":"08/01/2027","base_rate":31.93,"opex_rate":0.21000000000000085,"base_rent":16129.97,"opex":106.09,"gross_rent":16236.06,"abatement":0.0,"ti_credit":0,"net_rent":16236.06},{"month":"16","date":"09/01/2027","base_rate":31.93,"opex_rate":0.21000000000000085,"base_rent":16129.97,"opex":106.09,"gross_rent":16236.06,"abatement":0.0,"ti_credit":0,"net_rent":16236.06},{"month":"17","date":"10/01/2027","base_rate":31.93,"opex_rate":0.21000000000000085,"base_rent":16129.97,"opex":106.09,"gross_rent":16236.06,"abatement":0.0,"ti_credit":0,"net_rent":16236.06},{"month":"18","date":"11/01/2027","base_rate":31.93,"opex_rate":0.21000000000000085,"base_rent":16129.97,"opex":106.09,"gross_rent":16236.06,"abatement":0.0,"ti_credit":0,"net_rent":16236.06},{"month":"19","date":"12/01/2027","base_rate":31.93,"opex_rate":0.21000000000000085,"base_rent":16129.97,"opex":106.09,"gross_rent":16236.06,"abatement":0.0,"ti_credit":0,"net_rent":16236.06},{"month":"20","date":"01/01/2028","base_rate":31.93,"opex_rate":0.41999999999999993,"base_rent":16129.97,"opex":212.17,"gross_rent":16342.14,"abatement":0.0,"ti_credit":0,"net_rent":16342.14},{"month":"21","date":"02/01/2028","base_rate":31.93,"opex_rate":0.41999999999999993,"base_rent":16129.97,"opex":212.17,"gross_rent":16342.14,"abatement":0.0,"ti_credit":0,"net_rent":16342.14},{"month":"22","date":"03/01/2028","base_rate":31.93,"opex_rate":0.41999999999999993,"base_rent":16129.97,"opex":212.17,"gross_rent":16342.14,"abatement":0.0,"ti_credit":0,"net_rent":16342.14},{"month":"23","date":"04/01/2028","base_rate":31.93,"opex_rate":0.41999999999999993,"base_rent":16129.97,"opex":212.17,"gross_rent":16342.14,"abatement":0.0,"ti_credit":0,"net_rent":16342.14},{"month":"24","date":"05/01/2028","base_rate":31.93,"opex_rate":0.41999999999999993,"base_rent":16129.97,"opex":212.17,"gross_rent":16342.14,"abatement":0.0,"ti_credit":0,"net_rent":16342.14},{"month":"25","date":"06/01/2028","base_rate":32.89,"opex_rate":0.41999999999999993,"base_rent":16614.93,"opex":212.17,"gross_rent":16827.1,"abatement":0.0,"ti_credit":0,"net_rent":16827.1},{"month":"26","date":"07/01/2028","base_rate":32.89,"opex_rate":0.41999999999999993,"base_rent":16614.93,"opex":212.17,"gross_rent":16827.1,"abatement":0.0,"ti_credit":0,"net_rent":16827.1},{"month":"27","date":"08/01/2028","base_rate":32.89,"opex_rate":0.41999999999999993,"base_rent":16614.93,"opex":212.17,"gross_rent":16827.1,"abatement":0.0,"ti_credit":0,"net_rent":16827.1},{"month":"28","date":"09/01/2028","base_rate":32.89,"opex_rate":0.41999999999999993,"base_rent":16614.93,"opex":212.17,"gross_rent":16827.1,"abatement":0.0,"ti_credit":0,"net_rent":16827.1},{"month":"29","date":"10/01/2028","base_rate":32.89,"opex_rate":0.41999999999999993,"base_rent":16614.93,"opex":212.17,"gross_rent":16827.1,"abatement":0.0,"ti_credit":0,"net_rent":16827.1},{"month":"30","date":"11/01/2028","base_rate":32.89,"opex_rate":0.41999999999999993,"base_rent":16614.93,"opex":212.17,"gross_rent":16827.1,"abatement":0.0,"ti_credit":0,"net_rent":16827.1},{"month":"31","date":"12/01/2028","base_rate":32.89,"opex_rate":0.41999999999999993,"base_rent":16614.93,"opex":212.17,"gross_rent":16827.1,"abatement":0.0,"ti_credit":0,"net_rent":16827.1},{"month":"32","date":"01/01/2029","base_rate":32.89,"opex_rate":0.6400000000000006,"base_rent":16614.93,"opex":323.31,"gross_rent":16938.24,"abatement":0.0,"ti_credit":0,"net_rent":16938.24},{"month":"33","date":"02/01/2029","base_rate":32.89,"opex_rate":0.6400000000000006,"base_rent":16614.93,"opex":323.31,"gross_rent":16938.24,"abatement":0.0,"ti_credit":0,"net_rent":16938.24},{"month":"34","date":"03/01/2029","base_rate":32.89,"opex_rate":0.6400000000000006,"base_rent":16614.93,"opex":323.31,"gross_rent":16938.24,"abatement":0.0,"ti_credit":0,"net_rent":16938.24},{"month":"35","date":"04/01/2029","base_rate":32.89,"opex_rate":0.6400000000000006,"base_rent":16614.93,"opex":323.31,"gross_rent":16938.24,"abatement":0.0,"ti_credit":0,"net_rent":16938.24},{"month":"36","date":"05/01/2029","base_rate":32.89,"opex_rate":0.6400000000000006,"base_rent":16614.93,"opex":323.31,"gross_rent":16938.24,"abatement":0.0,"ti_credit":0,"net_rent":16938.24},{"month":"37","date":"06/01/2029","base_rate":33.88,"opex_rate":0.6400000000000006,"base_rent":17115.05,"opex":323.31,"gross_rent":17438.36,"abatement":0.0,"ti_credit":0,"net_rent":17438.36},{"month":"38","date":"07/01/2029","base_rate":33.88,"opex_rate":0.6400000000000006,"base_rent":17115.05,"opex":323.31,"gross_rent":17438.36,"abatement":0.0,"ti_credit":0,"net_rent":17438.36},{"month":"39","date":"08/01/2029","base_rate":33.88,"opex_rate":0.6400000000000006,"base_rent":17115.05,"opex":323.31,"gross_rent":17438.36,"abatement":0.0,"ti_credit":0,"net_rent":17438.36},{"month":"40","date":"09/01/2029","base_rate":33.88,"opex_rate":0.6400000000000006,"base_rent":17115.05,"opex":323.31,"gross_rent":17438.36,"abatement":0.0,"ti_credit":0,"net_rent":17438.36},{"month":"41","date":"10/01/2029","base_rate":33.88,"opex_rate":0.6400000000000006,"base_rent":17115.05,"opex":323.31,"gross_rent":17438.36,"abatement":0.0,"ti_credit":0,"net_rent":17438.36},{"month":"42","date":"11/01/2029","base_rate":33.88,"opex_rate":0.6400000000000006,"base_rent":17115.05,"opex":323.31,"gross_rent":17438.36,"abatement":0.0,"ti_credit":0,"net_rent":17438.36},{"month":"43","date":"12/01/2029","base_rate":33.88,"opex_rate":0.6400000000000006,"base_rent":17115.05,"opex":323.31,"gross_rent":17438.36,"abatement":0.0,"ti_credit":0,"net_rent":17438.36},{"month":"44","date":"01/01/2030","base_rate":33.88,"opex_rate":0.8599999999999994,"base_rent":17115.05,"opex":434.44,"gross_rent":17549.49,"abatement":0.0,"ti_credit":0,"net_rent":17549.49},{"month":"45","date":"02/01/2030","base_rate":33.88,"opex_rate":0.8599999999999994,"base_rent":17115.05,"opex":434.44,"gross_rent":17549.49,"abatement":0.0,"ti_credit":0,"net_rent":17549.49},{"month":"46","date":"03/01/2030","base_rate":33.88,"opex_rate":0.8599999999999994,"base_rent":17115.05,"opex":434.44,"gross_rent":17549.49,"abatement":0.0,"ti_credit":0,"net_rent":17549.49},{"month":"47","date":"04/01/2030","base_rate":33.88,"opex_rate":0.8599999999999994,"base_rent":17115.05,"opex":434.44,"gross_rent":17549.49,"abatement":0.0,"ti_credit":0,"net_rent":17549.49},{"month":"48","date":"05/01/2030","base_rate":33.88,"opex_rate":0.8599999999999994,"base_rent":17115.05,"opex":434.44,"gross_rent":17549.49,"abatement":0.0,"ti_credit":0,"net_rent":17549.49},{"month":"49","date":"06/01/2030","base_rate":34.9,"opex_rate":0.8599999999999994,"base_rent":17630.32,"opex":434.44,"gross_rent":18064.76,"abatement":0.0,"ti_credit":0,"net_rent":18064.76},{"month":"50","date":"07/01/2030","base_rate":34.9,"opex_rate":0.8599999999999994,"base_rent":17630.32,"opex":434.44,"gross_rent":18064.76,"abatement":0.0,"ti_credit":0,"net_rent":18064.76},{"month":"51","date":"08/01/2030","base_rate":34.9,"opex_rate":0.8599999999999994,"base_rent":17630.32,"opex":434.44,"gross_rent":18064.76,"abatement":0.0,"ti_credit":0,"net_rent":18064.76},{"month":"52","date":"09/01/2030","base_rate":34.9,"opex_rate":0.8599999999999994,"base_rent":17630.32,"opex":434.44,"gross_rent":18064.76,"abatement":0.0,"ti_credit":0,"net_rent":18064.76},{"month":"53","date":"10/01/2030","base_rate":34.9,"opex_rate":0.8599999999999994,"base_rent":17630.32,"opex":434.44,"gross_rent":18064.76,"abatement":0.0,"ti_credit":0,"net_rent":18064.76},{"month":"54","date":"11/01/2030","base_rate":34.9,"opex_rate":0.8599999999999994,"base_rent":17630.32,"opex":434.44,"gross_rent":18064.76,"abatement":0.0,"ti_credit":0,"net_rent":18064.76},{"month":"55","date":"12/01/2030","base_rate":34.9,"opex_rate":0.8599999999999994,"base_rent":17630.32,"opex":434.44,"gross_rent":18064.76,"abatement":0.0,"ti_credit":0,"net_rent":18064.76},{"month":"56","date":"01/01/2031","base_rate":34.9,"opex_rate":1.0899999999999999,"base_rent":17630.32,"opex":550.63,"gross_rent":18180.95,"abatement":0.0,"ti_credit":0,"net_rent":18180.95},{"month":"57","date":"02/01/2031","base_rate":34.9,"opex_rate":1.0899999999999999,"base_rent":17630.32,"opex":550.63,"gross_rent":18180.95,"abatement":0.0,"ti_credit":0,"net_rent":18180.95},{"month":"58","date":"03/01/2031","base_rate":34.9,"opex_rate":1.0899999999999999,"base_rent":17630.32,"opex":550.63,"gross_rent":18180.95,"abatement":0.0,"ti_credit":0,"net_rent":18180.95},{"month":"59","date":"04/01/2031","base_rate":34.9,"opex_rate":1.0899999999999999,"base_rent":17630.32,"opex":550.63,"gross_rent":18180.95,"abatement":0.0,"ti_credit":0,"net_rent":18180.95},{"month":"60","date":"05/01/2031","base_rate":34.9,"opex_rate":1.0899999999999999,"base_rent":17630.32,"opex":550.63,"gross_rent":18180.95,"abatement":0.0,"ti_credit":0,"net_rent":18180.95},{"month":"61","date":"06/01/2031","base_rate":35.95,"opex_rate":1.0899999999999999,"base_rent":18160.74,"opex":550.63,"gross_rent":18711.37,"abatement":0.0,"ti_credit":0,"net_rent":18711.37},{"month":"62","date":"07/01/2031","base_rate":35.95,"opex_rate":1.0899999999999999,"base_rent":18160.74,"opex":550.63,"gross_rent":18711.37,"abatement":0.0,"ti_credit":0,"net_rent":18711.37},{"month":"63","date":"08/01/2031","base_rate":35.95,"opex_rate":1.0899999999999999,"base_rent":18160.74,"opex":550.63,"gross_rent":18711.37,"abatement":0.0,"ti_credit":0,"net_rent":18711.37},{"month":"64","date":"09/01/2031","base_rate":35.95,"opex_rate":1.0899999999999999,"base_rent":18160.74,"opex":550.63,"gross_rent":18711.37,"abatement":0.0,"ti_credit":0,"net_rent":18711.37},{"month":"65","date":"10/01/2031","base_rate":35.95,"opex_rate":1.0899999999999999,"base_rent":18160.74,"opex":550.63,"gross_rent":18711.37,"abatement":0.0,"ti_credit":0,"net_rent":18711.37}],"calendar":[{"year":2026,"pre_commencement":46727.9,"new_lease":0.0,"total":46727.9},{"year":2027,"pre_commencement":0.0,"new_lease":163184.06,"total":163184.06},{"year":2028,"pre_commencement":0.0,"new_lease":199500.4,"total":199500.4},{"year":2029,"pre_commencement":0.0,"new_lease":206759.72,"total":206759.72},{"year":2030,"pre_commencement":0.0,"new_lease":214200.77,"total":214200.77},{"year":2031,"pre_commencement":0.0,"new_lease":184461.6,"total":184461.6}]}]};
        
        // State management
        let scenarios = dealData.deals.map((deal, idx) => ({
            dealIndex: idx,
            use50PercentFree: false,
            useExtraMonth: false, // Only applies to 5-year deal
            syncedWithFiveYear: false, // Only applies to 3-year extrapolated (idx 1)
            modified: false
        }));
        
        let annualChart, monthlyChart, totalChart;
        
        // Initialize the app
        function init() {
            renderDealCards();
            updateCharts();
        }
        
        // Render deal cards
        function renderDealCards() {
            const grid = document.getElementById('dealsGrid');
            grid.innerHTML = '';
            
            dealData.deals.forEach((deal, idx) => {
                const card = createDealCard(deal, idx);
                grid.appendChild(card);
            });
        }
        
        // Create a deal card
        function createDealCard(deal, idx) {
            const div = document.createElement('div');
            div.className = 'deal-card';
            
            const scenario = scenarios[idx];
            const currentTerms = calculateCurrentTerms(deal, scenario);
            
            div.innerHTML = `
                <div class="deal-header">
                    <div class="deal-name">${deal.info.name}${scenario.modified ? '<span class="modified-badge">MODIFIED</span>' : ''}</div>
                    <div class="deal-term">Base Term: ${currentTerms.termMonths} months</div>
                </div>
                
                <div class="deal-info">
                    <div class="info-row">
                        <span class="info-label">Suite Size:</span>
                        <span class="info-value">${deal.info.size.toLocaleString()} RSF</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Base Rate:</span>
                        <span class="info-value">$${deal.info.base_rate.toFixed(2)}/SF/yr</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Original Free Rent:</span>
                        <span class="info-value">${deal.info.free_rent_months} months @ 100%</span>
                    </div>
                </div>
                
                <div class="current-terms">
                    <div class="current-terms-title">Current Scenario:</div>
                    <div class="term-detail"><strong>Free Rent:</strong> ${currentTerms.freeRentMonths} months @ ${currentTerms.freeRentPercent}%</div>
                    <div class="term-detail"><strong>Total Term:</strong> ${currentTerms.termMonths} months</div>
                    <div class="term-detail"><strong>Total Obligation:</strong> $${currentTerms.totalObligation.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</div>
                    ${scenario.syncedWithFiveYear ? '<div class="term-detail" style="color: #3b82f6; font-weight: 600; margin-top: 8px;">âš–ï¸ Extended to match 5-Year term for comparison</div>' : ''}
                </div>
                
                ${createControlsSection(deal, idx, scenario)}
            `;
            
            return div;
        }
        
        // Create controls section
        function createControlsSection(deal, idx, scenario) {
            let html = `<div class="controls-section">
                <div class="controls-title">Adjustment Options</div>`;
            
            // 50% free rent option (all deals)
            html += `
                <div class="toggle-option ${scenario.use50PercentFree ? 'active' : ''}" onclick="toggleOption(${idx}, '50percent')">
                    <div class="toggle-header">
                        <input type="checkbox" class="toggle-checkbox" ${scenario.use50PercentFree ? 'checked' : ''} onclick="event.stopPropagation();">
                        <div class="toggle-label">Convert to 50% Free Rent</div>
                    </div>
                    <div class="toggle-description">
                        Convert ${deal.info.free_rent_months} months @ 100% free â†’ ${deal.info.free_rent_months * 2} months @ 50% free
                    </div>
                </div>
                
                <div class="benefit-highlight" style="margin-top: 12px;">
                    <div class="benefit-title">ğŸ’° Cash Flow Benefit</div>
                    <div class="benefit-text">Extended lower payments can help manage your budget while transitioning from your Midtown lease. Many landlords are flexible with restructuring free rent to support tenant cash flow needs.</div>
                </div>
            `;
            
            // Extra month option (5-year deal only)
            if (idx === 2) { // 5-year proposal
                html += `
                    <div class="toggle-option ${scenario.useExtraMonth ? 'active' : ''}" onclick="toggleOption(${idx}, 'extramonth')" style="margin-top: 15px;">
                        <div class="toggle-header">
                            <input type="checkbox" class="toggle-checkbox" ${scenario.useExtraMonth ? 'checked' : ''} onclick="event.stopPropagation();">
                            <div class="toggle-label">Add 1 Month of 100% Free Rent</div>
                        </div>
                        <div class="toggle-description">
                            Extend term by 1 month with additional 100% free rent (66 months with 6 months free total)
                        </div>
                        <div class="benefit-highlight" style="margin-top: 10px; background: #dbeafe; border-left: 3px solid #3b82f6;">
                            <div class="benefit-title" style="color: #1e40af;">ğŸ¯ Strategic Negotiation Point</div>
                            <div class="benefit-text" style="color: #1e3a8a;">See how just one more month of free rent could make a meaningful difference in your cash flow. Given that the Landlord is preparing to sell the building, they may be willing to accept this as a final counter in order to secure a longer-term lease, which significantly enhances the property's value to prospective buyers.</div>
                        </div>
                    </div>
                `;
            }
            
            html += `</div>`;
            
            return html;
        }
        
        // Calculate current terms based on scenario
        function calculateCurrentTerms(deal, scenario) {
            // Calculate actual term from monthly data (excluding pre-commencement months)
            const actualMonths = deal.monthly.filter(m => !m.month.startsWith('Pre')).length;
            let termMonths = actualMonths;
            let freeRentMonths = deal.info.free_rent_months;
            let freeRentPercent = 100;
            
            // Apply 50% free rent
            if (scenario.use50PercentFree) {
                freeRentMonths = freeRentMonths * 2;
                freeRentPercent = 50;
            }
            
            // Apply extra month (5-year deal only)
            if (scenario.useExtraMonth && scenario.dealIndex === 2) {
                termMonths += 1;
                if (!scenario.use50PercentFree) {
                    freeRentMonths += 1;
                } else {
                    freeRentMonths += 2; // Extra month becomes 2 months at 50%
                }
            }
            
            // If 3-year extrapolated is synced with 5-year extension
            if (scenario.dealIndex === 1 && scenario.syncedWithFiveYear) {
                termMonths += 1; // Extend by 1 month to match 5-year
            }
            
            // Calculate total obligation
            const modifiedMonthly = recalculateMonthly(deal, scenario);
            const totalObligation = modifiedMonthly.reduce((sum, m) => sum + m.net_rent, 0) + 
                                   (deal.calendar[0]?.pre_commencement || 0);
            
            return {
                termMonths,
                freeRentMonths,
                freeRentPercent,
                totalObligation
            };
        }
        
        // Toggle an option
        function toggleOption(dealIndex, option) {
            if (option === '50percent') {
                scenarios[dealIndex].use50PercentFree = !scenarios[dealIndex].use50PercentFree;
            } else if (option === 'extramonth') {
                scenarios[dealIndex].useExtraMonth = !scenarios[dealIndex].useExtraMonth;
                
                // When 5-year extra month is toggled, extend BOTH the 5-year and 3-year extrapolated
                if (dealIndex === 2) {
                    // The 3-Year Extrapolated is at index 1 - it should also get the extra month
                    scenarios[1].syncedWithFiveYear = scenarios[2].useExtraMonth;
                    scenarios[1].modified = scenarios[1].use50PercentFree || scenarios[1].syncedWithFiveYear;
                    
                    // Show/hide the sync notification
                    const syncNote = document.getElementById('syncNote');
                    if (syncNote) {
                        syncNote.style.display = scenarios[2].useExtraMonth ? 'block' : 'none';
                    }
                }
            }
            
            scenarios[dealIndex].modified = scenarios[dealIndex].use50PercentFree || scenarios[dealIndex].useExtraMonth;
            
            renderDealCards();
            updateCharts();
        }
        
        // Recalculate monthly payments with modifications
        function recalculateMonthly(deal, scenario) {
            let monthly = JSON.parse(JSON.stringify(deal.monthly)); // Deep copy
            
            // Get original free rent count
            let originalFreeMonths = deal.info.free_rent_months;
            let newFreeMonths = originalFreeMonths;
            let abatementPct = 1.0;
            
            // Total TI credit available - all deals have the same $60,620 pool
            const TOTAL_TI_CREDIT = 60620; // $10/SF * 6062 SF
            let remainingTICredit = TOTAL_TI_CREDIT;
            
            // Debug logging for 3-Year Extrapolated with 50%
            const debug = scenario.use50PercentFree && scenario.dealIndex === 1;
            if (debug) console.log(`\n=== DEBUGGING: ${deal.info.name} WITH 50% FREE RENT ===`);
            
            // Apply 50% free rent
            const using50Percent = scenario.use50PercentFree;
            if (using50Percent) {
                newFreeMonths = originalFreeMonths * 2;
                abatementPct = 0.5;
            }
            
            // Apply extra month for 5-year deal
            if (scenario.useExtraMonth && scenario.dealIndex === 2) {
                if (!using50Percent) {
                    newFreeMonths += 1;
                } else {
                    newFreeMonths += 2;
                }
                
                // Add one more month to the end
                const lastMonth = monthly[monthly.length - 1];
                const newMonth = JSON.parse(JSON.stringify(lastMonth));
                const nextMonthNum = parseInt(lastMonth.month) + 1;
                newMonth.month = nextMonthNum.toString();
                monthly.push(newMonth);
            }
            
            // If this is the 3-year extrapolated (index 1) and it's synced with 5-year extra month
            if (scenario.dealIndex === 1 && scenario.syncedWithFiveYear) {
                const lastMonth = monthly[monthly.length - 1];
                const newMonth = JSON.parse(JSON.stringify(lastMonth));
                const nextMonthNum = parseInt(lastMonth.month) + 1;
                newMonth.month = nextMonthNum.toString();
                newMonth.abatement = 0;
                newMonth.ti_credit = 0;
                newMonth.net_rent = newMonth.gross_rent;
                monthly.push(newMonth);
            }
            
            // Apply free rent adjustments
            let freeRentMonthsUsed = 0;
            
            for (let i = 0; i < monthly.length; i++) {
                const m = monthly[i];
                
                // Skip pre-commencement months
                if (m.month.startsWith('Pre')) continue;
                
                // Store original values for non-50% scenarios
                const originalTICredit = m.ti_credit || 0;
                const originalAbatement = m.abatement || 0;
                
                // Are we in the modified free rent period?
                const inModifiedFreeRent = freeRentMonthsUsed < newFreeMonths;
                
                if (using50Percent) {
                    // 50% CONVERSION LOGIC - applies to all deals
                    if (inModifiedFreeRent && m.gross_rent > 0) {
                        // During free rent period: 50% abatement + 50% from TI credit
                        m.abatement = m.gross_rent * 0.5;
                        const remainingAfterAbatement = m.gross_rent - m.abatement;
                        
                        if (remainingTICredit >= remainingAfterAbatement) {
                            m.ti_credit = remainingAfterAbatement;
                            remainingTICredit -= remainingAfterAbatement;
                            m.net_rent = 0;
                        } else if (remainingTICredit > 0) {
                            m.ti_credit = remainingTICredit;
                            remainingTICredit = 0;
                            m.net_rent = m.gross_rent - m.abatement - m.ti_credit;
                        } else {
                            m.ti_credit = 0;
                            m.net_rent = m.gross_rent - m.abatement;
                        }
                        freeRentMonthsUsed++;
                        
                        if (debug && parseInt(m.month) <= 10) {
                            console.log(`Month ${m.month}: Gross=$${m.gross_rent.toFixed(2)}, Abate=$${m.abatement.toFixed(2)}, TI=$${m.ti_credit.toFixed(2)}, Net=$${m.net_rent.toFixed(2)}, Remaining TI=$${remainingTICredit.toFixed(2)}`);
                        }
                    } else if (remainingTICredit > 0 && m.gross_rent > 0) {
                        // After free rent period: continue using remaining TI credit
                        m.abatement = 0;
                        
                        if (remainingTICredit >= m.gross_rent) {
                            m.ti_credit = m.gross_rent;
                            remainingTICredit -= m.gross_rent;
                            m.net_rent = 0;
                        } else {
                            m.ti_credit = remainingTICredit;
                            remainingTICredit = 0;
                            m.net_rent = m.gross_rent - m.ti_credit;
                        }
                        
                        if (debug && parseInt(m.month) <= 10) {
                            console.log(`Month ${m.month}: Gross=$${m.gross_rent.toFixed(2)}, Abate=$0.00, TI=$${m.ti_credit.toFixed(2)}, Net=$${m.net_rent.toFixed(2)}, Remaining TI=$${remainingTICredit.toFixed(2)}`);
                        }
                    } else {
                        // No free rent, no TI credit left
                        m.abatement = 0;
                        m.ti_credit = 0;
                        m.net_rent = m.gross_rent;
                        
                        if (debug && parseInt(m.month) <= 10) {
                            console.log(`Month ${m.month}: Full rent - Net=$${m.net_rent.toFixed(2)}`);
                        }
                    }
                } else {
                    // 100% FREE RENT
                    if (inModifiedFreeRent && m.gross_rent > 0) {
                        // Apply 100% abatement during extended free rent period
                        m.abatement = m.gross_rent;
                        m.ti_credit = 0;
                        m.net_rent = 0;
                        freeRentMonthsUsed++;
                    } else if (remainingTICredit > 0 && m.gross_rent > 0) {
                        // After free rent: continue using remaining TI credit
                        m.abatement = 0;
                        
                        if (remainingTICredit >= m.gross_rent) {
                            m.ti_credit = m.gross_rent;
                            remainingTICredit -= m.gross_rent;
                            m.net_rent = 0;
                        } else {
                            m.ti_credit = remainingTICredit;
                            remainingTICredit = 0;
                            m.net_rent = m.gross_rent - m.ti_credit;
                        }
                    } else {
                        // No free rent, no TI credit left
                        m.abatement = 0;
                        m.ti_credit = 0;
                        m.net_rent = m.gross_rent;
                    }
                }
            }
            
            return monthly;
        }
        
        // Recalculate calendar years
        function recalculateCalendarYears(deal, scenario) {
            const monthly = recalculateMonthly(deal, scenario);
            const yearTotals = {};
            
            // Initialize years
            deal.calendar.forEach(y => {
                yearTotals[y.year] = {
                    year: y.year,
                    pre_commencement: y.pre_commencement,
                    new_lease: 0,
                    total: y.pre_commencement
                };
            });
            
            // If extra month was added, may need new year
            if (scenario.useExtraMonth && scenario.dealIndex === 2) {
                const lastYear = Math.max(...Object.keys(yearTotals).map(Number));
                if (!yearTotals[lastYear + 1]) {
                    yearTotals[lastYear + 1] = {
                        year: lastYear + 1,
                        pre_commencement: 0,
                        new_lease: 0,
                        total: 0
                    };
                }
            }
            
            // Aggregate monthly to years
            monthly.forEach(m => {
                if (!m.date || m.date === 'nan') return;
                
                const year = parseInt(m.date.split('/')[2]);
                if (yearTotals[year]) {
                    yearTotals[year].new_lease += m.net_rent;
                    yearTotals[year].total = yearTotals[year].pre_commencement + yearTotals[year].new_lease;
                }
            });
            
            return Object.values(yearTotals).sort((a, b) => a.year - b.year);
        }
        
        // Update charts
        function updateCharts() {
            updateAnnualChart();
            updateMonthlyChart();
            updateTotalChart();
            updateSummaryCards();
        }
        
        // Update annual expenditure chart
        function updateAnnualChart() {
            const ctx = document.getElementById('annualChart');
            
            // Collect all unique years
            const allYears = new Set();
            dealData.deals.forEach(deal => {
                deal.calendar.forEach(y => allYears.add(y.year));
            });
            const years = Array.from(allYears).sort();
            
            // Build datasets for each scenario
            const datasets = scenarios.map((scenario, idx) => {
                const deal = dealData.deals[idx];
                const calendarYears = recalculateCalendarYears(deal, scenario);
                
                const data = years.map(year => {
                    const yearData = calendarYears.find(y => y.year === year);
                    return yearData ? yearData.total : 0;
                });
                
                const colors = ['#3b82f6', '#f59e0b', '#10b981']; // Blue, Orange, Green
                let label = deal.info.name;
                if (scenario.modified) {
                    label += ' (Modified';
                    if (scenario.syncedWithFiveYear) {
                        label += ' - Extended to Match';
                    }
                    label += ')';
                }
                
                return {
                    label: label,
                    data: data,
                    backgroundColor: colors[idx],
                    borderColor: colors[idx],
                    borderWidth: 2
                };
            });
            
            if (annualChart) {
                annualChart.destroy();
            }
            
            annualChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: years,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += '$' + context.parsed.y.toLocaleString(undefined, {minimumFractionDigits: 2});
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + (value / 1000).toFixed(0) + 'K';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Update monthly comparison chart
        function updateMonthlyChart() {
            const ctx = document.getElementById('monthlyChart');
            
            // Build datasets for each scenario
            const datasets = scenarios.map((scenario, idx) => {
                const deal = dealData.deals[idx];
                const modifiedMonthly = recalculateMonthly(deal, scenario);
                
                // Filter out pre-commencement months and extract net_rent
                const monthlyData = modifiedMonthly
                    .filter(m => !m.month.startsWith('Pre'))
                    .map(m => m.net_rent);
                
                const colors = ['#3b82f6', '#f59e0b', '#10b981']; // Blue, Orange, Green
                let label = deal.info.name;
                if (scenario.modified) {
                    label += ' (Modified';
                    if (scenario.syncedWithFiveYear) {
                        label += ' - Extended';
                    }
                    label += ')';
                }
                
                return {
                    label: label,
                    data: monthlyData,
                    borderColor: colors[idx],
                    backgroundColor: colors[idx] + '20', // 20 is alpha for transparency
                    borderWidth: 2,
                    fill: false,
                    tension: 0.1
                };
            });
            
            // Find the maximum number of months across all scenarios
            const maxMonths = Math.max(...datasets.map(d => d.data.length));
            const monthLabels = Array.from({length: maxMonths}, (_, i) => (i + 1).toString());
            
            if (monthlyChart) {
                monthlyChart.destroy();
            }
            
            monthlyChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: monthLabels,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += '$' + context.parsed.y.toLocaleString(undefined, {minimumFractionDigits: 2});
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Lease Month'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + (value / 1000).toFixed(0) + 'K';
                                }
                            },
                            title: {
                                display: true,
                                text: 'Net Monthly Obligation'
                            }
                        }
                    }
                }
            });
        }
        
        // Update total obligation chart
        function updateTotalChart() {
            const ctx = document.getElementById('totalChart');
            
            const labels = [];
            const data = [];
            const colors = ['#3b82f6', '#f59e0b', '#10b981']; // Blue, Orange, Green
            const backgroundColors = [];
            
            scenarios.forEach((scenario, idx) => {
                const deal = dealData.deals[idx];
                const calendarYears = recalculateCalendarYears(deal, scenario);
                const total = calendarYears.reduce((sum, y) => sum + y.total, 0);
                
                let label = deal.info.name;
                if (scenario.modified) {
                    label += ' (Modified';
                    if (scenario.syncedWithFiveYear) {
                        label += ' - Extended';
                    }
                    label += ')';
                }
                
                labels.push(label);
                data.push(total);
                backgroundColors.push(colors[idx]);
            });
            
            if (totalChart) {
                totalChart.destroy();
            }
            
            totalChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Total Obligation',
                        data: data,
                        backgroundColor: backgroundColors,
                        borderColor: backgroundColors,
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Total: $' + context.parsed.y.toLocaleString(undefined, {minimumFractionDigits: 2});
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + (value / 1000).toFixed(0) + 'K';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Update summary cards
        function updateSummaryCards() {
            const grid = document.getElementById('summaryGrid');
            grid.innerHTML = '';
            
            scenarios.forEach((scenario, idx) => {
                const deal = dealData.deals[idx];
                const calendarYears = recalculateCalendarYears(deal, scenario);
                const total = calendarYears.reduce((sum, y) => sum + y.total, 0);
                
                const card = document.createElement('div');
                card.className = 'summary-card';
                // Blue for 3-Year, Orange for 3-Year Extrapolated, Green for 5-Year
                card.style.background = ['linear-gradient(135deg, #667eea 0%, #764ba2 100%)', 
                                        'linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)',
                                        'linear-gradient(135deg, #10b981 0%, #059669 100%)'][idx];
                
                let displayName = deal.info.name;
                if (scenario.modified) {
                    displayName += ' (Modified';
                    if (scenario.syncedWithFiveYear) {
                        displayName += ' - Extended';
                    }
                    displayName += ')';
                }
                
                card.innerHTML = `
                    <div class="summary-deal-name">${displayName}</div>
                    <div class="summary-amount">$${(total / 1000).toFixed(1)}K</div>
                    <div class="summary-label">Total Obligation Over Term</div>
                `;
                
                grid.appendChild(card);
            });
        }
        
        // Initialize on load
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
